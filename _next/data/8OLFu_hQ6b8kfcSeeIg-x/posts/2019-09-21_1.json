{"pageProps":{"blog":{"title":"LinuxLiteにPeerCast","publishedAt":"2019-09-21","body":"<p>Linux インストールするたびにやってることのまとめ。あくまで視聴するために必要なものを入れます。</p>\n<ul>\n<li><a href=\"#%E8%89%B2%E3%80%85%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\">色々インストール</a>\n<ul>\n<li><a href=\"#%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6\">前提条件</a></li>\n<li><a href=\"#peercaststation\">PeerCastStation</a></li>\n<li><a href=\"#mono\">mono</a></li>\n<li><a href=\"#qpeercastyp\">QPeerCastYP</a></li>\n<li><a href=\"#pureplayer\">PurePlayer</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\">動作確認</a>\n<ul>\n<li><a href=\"#qpeercastyp-%E3%81%AE%E8%A8%AD%E5%AE%9A\">QPeerCastYP の設定</a></li>\n</ul>\n</li>\n<li><a href=\"#%E3%81%8A%E3%81%BE%E3%81%91\">おまけ</a>\n<ul>\n<li><a href=\"#epcyp\">epcyp</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%8F%82%E8%80%83\">参考</a></li>\n</ul>\n<h2>色々インストール</h2>\n<h3>前提条件</h3>\n<p>ディレクトリ構造は以下とします。</p>\n<pre><code>~/\n├── Desktop\n│   ├── Untitled-1.md\n│   ├── computer.desktop\n│   ├── helpmanual.desktop\n│   ├── network.desktop\n│   ├── recyclebin.desktop\n│   ├── settings.desktop\n│   └── userfiles.desktop\n├── Documents\n├── Downloads\n├── Music\n├── Peca ←★今回の作業ディレクトリ\n├── Pictures\n├── Public\n├── Templates\n└── Videos\n</code></pre>\n<h3>PeerCastStation</h3>\n<p><a href=\"http://www.pecastation.org/\">http://www.pecastation.org/</a></p>\n<p>いつも開発版を使っているのでそっちをダウンロードします。好みなのでお好きなようにどうぞ。</p>\n<pre><code>cd ~/Peca\ncurl -O http://www.pecastation.org/files/PeerCastStation-2.7.2.1.zip\nunzip PeerCastStation-2.7.2.1.zip\n</code></pre>\n<h3>mono</h3>\n<p>mono は Linux で PeerCastStation を使用するためのツールです。apt を使ってインストールできますが、バージョンに違いなのか大体うまくいかないので最新版のソースをダウンロードしてビルドします。</p>\n<p>※2019/9/21 時点の最新バージョンは 6.0.0.334 でした。各バージョンのソースは<a href=\"https://download.mono-project.com/sources/mono/\">ここ</a>から取得できます。</p>\n<pre><code>cd ~/Peca\nsudo apt install -y git autoconf libtool automake build-essential gettext cmake python curl\ncurl -O https://download.mono-project.com/sources/mono/mono-6.0.0.334.tar.xz\ntar xvf mono-6.0.0.334.tar.xz\ncd mono-6.0.0.334\n./configure\nmake    # 30分以上かかりました\nsudo make install\n</code></pre>\n<h3>QPeerCastYP</h3>\n<p>QPeerCastYP は PeerCast 補助ツールです。配信の一覧を表示したりするツールです。</p>\n<pre><code>cd ~/Peca\nsudo apt install -y build-essential libqt4-dev\ngit clone https://github.com/bookdraft/QPeerCastYP.git\ncd QPeerCastYP\n./configure\nmake\nsudo make install\n</code></pre>\n<p>これで<code>Menu</code>の<code>マルチメディア</code>に QPeerCastYP が表示されるはずです。</p>\n<h3>PurePlayer</h3>\n<p>PurePlayer*は、Linux 用のメディアプレイヤー及び PeerCast 視聴プレイヤーです。QPeerCastYP と連携して視聴できるようにします。</p>\n<pre><code>cd ~/Peca\nsudo apt install -y mplayer qt4-default g++\ngit clone https://github.com/nelkana/PurePlayer_As.git\ncd PurePlayer_As\nqmake\nmake\n</code></pre>\n<h2>動作確認</h2>\n<p>ターミナルで<code>PeerCastStation.exe</code>があるディレクトリに移動して以下コマンドを実行。</p>\n<pre><code>mono PeerCastStation.exe\n</code></pre>\n<p>ブラウザから<code>http://localhost:7144</code>にアクセスしてきちんと表示されれば OK。</p>\n<h3>QPeerCastYP の設定</h3>\n<p>QPeerCastYP 起動後、<code>設定 > プレイヤ</code>に移動します。各項目に対して色々設定します。</p>\n<table>\n<thead>\n<tr>\n<th>項目</th>\n<th>値</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>プログラム</td>\n<td>/home/{ユーザー名}/Peca/PurePlayer_As/pureplayer</td>\n</tr>\n<tr>\n<td>種類</td>\n<td>wmv|ogm|nsv|flv</td>\n</tr>\n<tr>\n<td>引数</td>\n<td>$STREAM_URL</td>\n</tr>\n</tbody>\n</table>\n<p>配信の一覧から配信者のリンクを押したら<code>PurePlayer</code>が開き、配信が写れば OK。</p>\n<h2>おまけ</h2>\n<p>中山さん(<a href=\"https://twitter.com/mrnakayama\">@mrnakayama</a>)作の PeerCast 補助ツールも紹介します。</p>\n<h4>epcyp</h4>\n<p>ダウンロードから起動まで。</p>\n<pre><code>cd ~/Peca\nwget https://github.com/mrhorin/epcyp/releases/download/v1.2.0/epcyp_v1.2.0_linux.zip\nunzip epcyp_v1.2.0_linux.zip\ncd epcyp-linux-x64\n./epcyp\n</code></pre>\n<p>起動したら歯車アイコンを押して設定画面を開きます。</p>\n<p>PeerCast タブ</p>\n<table>\n<thead>\n<tr>\n<th>項目</th>\n<th>値</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>PeerCast 本体</td>\n<td>/home/{ユーザー名}/Peca/PeerCastStation-2.7.2.1/PeerCastStation.exe</td>\n</tr>\n<tr>\n<td>mono を使用して起動する</td>\n<td>ON</td>\n</tr>\n</tbody>\n</table>\n<p>YP タブ</p>\n<table>\n<thead>\n<tr>\n<th>名前</th>\n<th>URL</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>SP</td>\n<td><a href=\"http://bayonet.ddo.jp/sp/\">http://bayonet.ddo.jp/sp/</a></td>\n</tr>\n<tr>\n<td>TP</td>\n<td><a href=\"http://temp.orz.hm/yp/\">http://temp.orz.hm/yp/</a></td>\n</tr>\n</tbody>\n</table>\n<p>プレイヤー</p>\n<table>\n<thead>\n<tr>\n<th>項目</th>\n<th>値</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>タイプ(正規表現)</td>\n<td>WMV|FLV</td>\n</tr>\n<tr>\n<td>再生プレイヤー</td>\n<td>/home/{ユーザー名}/Peca/PurePlayer_As/pureplayer</td>\n</tr>\n<tr>\n<td>引数</td>\n<td>\"$x\"</td>\n</tr>\n</tbody>\n</table>\n<p>全部設定したら OK ボタン押して保存します。</p>\n<p>配信の一覧を読み込み直すと SP と TP の一覧が出ます。ダブルクリックするとプレイヤーが起動して視聴できます。</p>\n<h2>参考</h2>\n<p><a href=\"https://qiita.com/DoG_peer/items/ef5b3869a5a7b39aa6d3\">Kubuntu16.04 で peercast</a></p>\n<p><a href=\"https://qiita.com/takanemu/items/be47fbea4c1483776c8f\">新しいバージョンの Mono をインストールする方法</a></p>\n"}},"__N_SSG":true}