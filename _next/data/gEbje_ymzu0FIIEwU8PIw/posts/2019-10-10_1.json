{"pageProps":{"blog":{"id":"2019-10-10_1","title":"vagrant + gitbookで共有フォルダ内でbuildしたらno such file or directoryが出て困る","publishedAt":"2019-10-10","body":"<p>最近、仕事でこそこそgitbookを使っています。vscodeでmarkdownを書きたいので共有フォルダを設定してホストOS側で編集したあと、ゲストOSでbuildしてます。</p>\n<p>環境構築時、buildするとエラー（no such file or directory）になってしまいました。ファイルあるのに。。。<br>\nでも、gitbookのライブラリっぽいファイルを修正することで解決できたので備忘として残します。</p>\n<pre><code>[vagrant@localhost hoge]$ gitbook build\ninfo: 8 plugins are installed\ninfo: 5 explicitly listed\ninfo: loading plugin \"search-pro-kui\"... OK\ninfo: loading plugin \"highlight\"... OK\ninfo: loading plugin \"sharing\"... OK\ninfo: loading plugin \"fontsettings\"... OK\ninfo: loading plugin \"theme-default\"... OK\ninfo: found 5 pages\ninfo: found 22 asset files\n\nError: ENOENT: no such file or directory, stat '/vagrant/hoge/_book/gitbook/gitbook-plugin-fontsettings/fontsettings.js'\n</code></pre>\n<h2 id=\"環境\">環境</h2>\n<ul>\n<li>Windows10（ホストOS）</li>\n<li>centos7（ゲストOS）</li>\n<li>vagrant 2.2.5</li>\n<li>VirtualBox 6.0.12</li>\n<li>GitBook 3.2.3</li>\n</ul>\n<h2 id=\"vagrantfile\">Vagrantfile</h2>\n<pre><code class=\"language-ruby\">  # synced folder\n  config.vm.synced_folder \".\", \"/vagrant\", type: \"nfs\"\n</code></pre>\n<h2 id=\"対応方法\">対応方法</h2>\n<p><code>copyPluginAssets.js</code>内のメソッドの戻り値を変更する。</p>\n<ol>\n<li><code>copyPluginAssets.js</code>を探す</li>\n</ol>\n<pre><code class=\"language-bash\">$ find / -name \"copyPluginAssets.js\"\n</code></pre>\n<ol start=\"2\">\n<li>ファイルが見つかるはずなので、vi等で開く</li>\n<li><code>copyAssets</code>メソッドを探す。（45行目あたり）</li>\n<li>戻り値の<code>confirm</code>の値を<code>false</code>に変更。</li>\n<li><code>copyResources</code>メソッドを探す。（78行目あたり）</li>\n<li>戻り値の<code>confirm</code>の値を<code>false</code>に変更。</li>\n<li>保存。</li>\n</ol>\n<h2 id=\"参考サイト\">参考サイト</h2>\n<ul>\n<li><a href=\"https://kuttsun.blogspot.com/2018/06/gitbook-no-such-file-or-directory.html\">https://kuttsun.blogspot.com/2018/06/gitbook-no-such-file-or-directory.html</a></li>\n</ul>"}},"__N_SSG":true}