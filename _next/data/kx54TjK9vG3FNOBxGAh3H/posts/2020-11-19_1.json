{"pageProps":{"blog":{"id":"2020-11-19_1","title":"Codeigniter 4 メモ","publishedAt":"2020-11-19","body":"<h2 id=\"cli\">CLI</h2>\n<h3 id=\"マイグレーションファイル作成\">マイグレーションファイル作成</h3>\n<pre><code># php spark migrate:create {table name}\n</code></pre>\n<h3 id=\"シードファイル作成\">シードファイル作成</h3>\n<pre><code># php spark make:seeder {table name}\n</code></pre>\n<h3 id=\"シード投入\">シード投入</h3>\n<pre><code># php spark db:seed {seed file name}\n</code></pre>\n<h2 id=\"書き方\">書き方</h2>\n<h3 id=\"マイグレーションファイル\">マイグレーションファイル</h3>\n<pre><code class=\"language-php\">&#x3C;?php\nnamespace App\\Database\\Migrations;\n\nuse CodeIgniter\\Database\\Migration;\n\nclass Cars extends Migration\n{\n    public function up()\n    {\n        $this->forge->addField([\n            'id'     => [\n                    'type'           => 'CHAR',\n                    'constraint'     => 32,\n            ],\n            'type'   => [\n                    'type'           => 'TEXT',\n            ],\n            'price'  => [\n                    'type'           => 'INT',\n                    'constraint'     => 32,\n            ],\n            'color'  => [\n                    'type'           => 'TEXT',\n            ],\n            'remark' => [\n                    'type'           => 'TEXT',\n                    'null'           => true,\n            ],\n            'status' => [\n                    'type'           => 'ENUM',\n                    'constraint'     => ['onsale', 'sold'],\n                    'default'        => 'onsale',\n            ],\n\n            // 配列だとdatetime型でdefault設定ができないので以下書き方となる\n            'created_at datetime default current_timestamp',\n            'updated_at datetime default current_timestamp on update current_timestamp',\n        ]);\n        $this->forge->addKey('id', true); // PL\n        $this->forge->createTable('cars');  // created\n    }\n\n    //--------------------------------------------------------------------\n\n    public function down()\n    {\n        $this->forge->dropTable('cars');\n    }\n}\n</code></pre>"}},"__N_SSG":true}