{"pageProps":{"blog":{"id":"2021-12-13_create-lambda-layer","title":"Amazon Lambda Layer の作成","publishedAt":"2021-12-13","body":"<p>まず、<code>Amazon Lambda Layer</code> とは下記のものです。</p>\n<blockquote>\n<p>一言で言えば、複数のLambda関数でライブラリを共有できる仕組みです。</p>\n</blockquote>\n<p>Lambda の Python は標準である程度ライブラリが利用できるようになってますが、 pandas や numpy 、 requests など利用できないライブラリもあります。<br>\n「ライブラリを追加したい + 複数のLambdaで共有したい」ときに <code>Amazon Lambda Layer</code> を活用すると便利になります。<br>\nまた、既存のライブラリ以外にも独自で作成したライブラリもLayer化すれば共有できるのでいい感じです。</p>\n<h3 id=\"手順\">手順</h3>\n<ol>\n<li>ライブラリを ZIP にまとめる</li>\n<li>AWS Lambda から レイヤーの作成を行う</li>\n<li>Lambda関数からレイヤーを選択する</li>\n</ol>\n<p>以下、 requests を例に説明します。</p>\n<h4 id=\"1-ライブラリを-zip-にまとめる\">1. ライブラリを ZIP にまとめる</h4>\n<p>ターミナル等から任意のディレクトリで以下を実行する。</p>\n<pre><code class=\"language-sh\">mkdir python\npip install -t python requests\nzip -r9 layer.zip python\n</code></pre>\n<h4 id=\"2-aws-lambda-から-レイヤーの作成を行う\">2. AWS Lambda から レイヤーの作成を行う</h4>\n<ol>\n<li><a href=\"https://ap-northeast-1.console.aws.amazon.com/lambda/home\">AWS Lambdaのコンソール</a>から 2. <code>その他リリース > レイヤー</code> を選択する。</li>\n<li>画面右上の <code>レイヤーの作成</code> ボタンからレイヤーの作成を行う。</li>\n<li>各項目を適当に入力して、さっき作成したZIPファイルをアップロードし、<code>作成</code>ボタンを押す。これでレイヤーの作成は完了です。</li>\n</ol>\n<h4 id=\"3-lambda関数からレイヤーを選択する\">3. Lambda関数からレイヤーを選択する</h4>\n<ol>\n<li>requests を使いたいLambda関数を開き、<code>関数の概要</code> のところにある Layers を選択する。</li>\n<li><code>レイヤーの追加</code> ボタンからさっき作成したレイヤーを選択する。</li>\n<li><code>import requests</code> を定義すれば、利用できます。</li>\n</ol>\n<h1 id=\"参考\">参考</h1>\n<ul>\n<li><a href=\"https://dev.classmethod.jp/articles/lambda-layer-basics-how-it-works/\">Lambda Layerの基本的な仕組みを確認する #reinvent</a></li>\n<li><a href=\"https://sebenkyo.com/2021/05/21/post-1979/\">【AWS】LambdaにrequestsライブラリをLayerで追加する</a></li>\n</ul>"}},"__N_SSG":true}