{"pageProps":{"blog":{"id":"2019-11-25_1","title":"【PHP】前月・翌月の末日を求めるときは慎重に","publishedAt":"2019-11-25","body":"<p>前月・翌月を求めるとき起算日や計算方法によっては、正確に求められないことがあります。</p>\n<h2 id=\"確認環境\">確認環境</h2>\n<ul>\n<li>PHP 7.3</li>\n</ul>\n<pre><code class=\"language-php\">&#x3C;?php\n// 10月31日の前月の末日を取得したい\necho date('Y-m-d', strtotime('2019-10-31 -1 month'));\n// 想定：2019-09-30\n// 実際：2019-10-01\n\n// 10月31日の翌月の末日を取得したい\necho date('Y-m-d', strtotime('2019-10-31 +1 month'));\n// 想定：2019-11-30\n// 実際：2019-12-01\n\n// 🤔🤔🤔\n</code></pre>\n<p>多分こんなからくり。</p>\n<ul>\n<li>2019-10-31の一月前 => 2019-09-31 => 9月に31日はないので繰り上げて2019-10-01。</li>\n<li>2019-10-31の一月後 => 2019-11-31 => 11月に31日はないので繰り上げて2019-12-01。</li>\n</ul>\n<p>正確に求めたい場合は以下の指定をしましょう。</p>\n<pre><code class=\"language-php\">&#x3C;?php\n//=====================\n// 前月\n//=====================\n// 一番スマート\necho date('Y-m-d', strtotime('2019-10-31 last day of previous month'));\n// 2019-09-30\n\n// 当月の初日を取得したあとに、1日マイナスする\n$firstDayOfThisMonth = date('Y-m-d', strtotime('2019-10-31 first day of this month'));\necho date('Y-m-d', strtotime($firstDayOfThisMonth . '-1 day'));\n// 2019-09-30\n\n//=====================\n// 翌月\n//=====================\n// スマート\necho date('Y-m-d', strtotime('2019-10-31 last day of next month'));\n// 2019-11-30\n\n</code></pre>"}},"__N_SSG":true}